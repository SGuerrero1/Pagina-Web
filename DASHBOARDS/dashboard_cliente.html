<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodApp - Panel de Cliente</title>
    <link rel="stylesheet" href="cliente.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Botones de idioma y modo oscuro en la parte superior derecha -->
    <div id="config-buttons-cliente" style="position:fixed;top:18px;right:24px;z-index:10001;display:flex;gap:12px;">
        <button id="btn-idioma" style="padding:7px 18px;border-radius:8px;border:none;background:#2257ff;color:#fff;font-weight:500;cursor:pointer;">English</button>
        <button id="btn-darkmode" style="padding:7px 18px;border-radius:8px;border:none;background:#222;color:#fff;font-weight:500;cursor:pointer;">üåô</button>
    </div>
    <!-- Contenido del Dashboard (Cliente) -->
    <div class="dashboard client-dashboard" id="client-dashboard">
        <nav class="sidebar">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <h2>FoodApp</h2>
            </div>
            <ul class="menu">
                <li class="active"><a href="#"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="#" class="feature-link"><i class="fas fa-hamburger"></i> Men√∫</a></li>
                <li><a href="#" class="feature-link"><i class="fas fa-map-marker-alt"></i> GPS</a></li>
                <li><a href="#" class="feature-link"><i class="fas fa-shopping-cart"></i> Carrito</a></li>
                <li><a href="#" class="feature-link"><i class="fas fa-history"></i> Historial</a></li>
                <li><a href="#" class="feature-link"><i class="fas fa-user"></i> Perfil</a></li>
                <li><a href="#" id="client-logout"><i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n</a></li>
            </ul>
        </nav>
        <main class="content">
            <header>
                <h1>¬°Bienvenido, Cliente!</h1>
                <div class="user-info">
                    <span>Cliente</span>
                    <!-- Aqu√≠ se insertar√° la imagen de perfil por JS si existe -->
                </div>
            </header>
            <!-- Descripci√≥n de la aplicaci√≥n -->
            <section class="app-description" style="margin: 24px 0 18px 0; padding: 18px 22px; background: #fff7f0; border-radius: 10px; box-shadow: 0 2px 8px rgba(255,87,34,0.07);">
                <h2 style="color:#ff5722; margin-top:0;">¬øQu√© es FoodApp?</h2>
                <p style="font-size:1.08em; color:#444; margin-bottom:0;">FoodApp es una plataforma digital que conecta a clientes y restaurantes, permiti√©ndote explorar men√∫s, buscar tus platos favoritos, realizar pedidos, gestionar tu perfil y mucho m√°s, todo de forma r√°pida y sencilla.</p>
            </section>
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="buscador-platos" placeholder="Buscar platos por nombre...">
                    <button><i class="fas fa-search"></i></button>
                </div>
            </div>
            <h2>Platos Recomendados</h2>
            <div class="food-grid" id="food-grid">
                <div id="search-error" style="margin-top: 15px; color: red; font-weight: bold;"></div>
                <!-- Los platos se cargar√°n din√°micamente aqu√≠ -->
            </div>
            <!-- Encuesta de satisfacci√≥n: se renderiza aqu√≠ por JS si hay pendiente -->
            <div id="encuesta-satisfaccion-cliente" style="margin-top:24px;"></div>
            <!-- Apartado de contacto -->
            <section class="contact-section" style="margin: 36px 0 0 0; padding: 18px 22px; background: #f0f7ff; border-radius: 10px; box-shadow: 0 2px 8px rgba(34,87,255,0.07);">
                <h2 style="color:#2257ff; margin-top:0;">Contacto</h2>
                <p style="font-size:1.08em; color:#333; margin-bottom:0;">
                    ¬øTienes dudas o necesitas ayuda? Cont√°ctanos por WhatsApp:
                    <a href="https://wa.me/573203523841" target="_blank" style="color:#25d366; font-weight:bold; text-decoration:none; margin-left:8px;"><i class="fab fa-whatsapp"></i> 3203523841</a>
                </p>
            </section>
        </main>
    </div>
    <script src="cliente.js"></script>
    <script>
        // Buscador funcional: busca por nombre de plato creado
        const buscador = document.getElementById('buscador-platos');
        if (buscador) {
            buscador.addEventListener('input', function() {
                const query = buscador.value.trim().toLowerCase();
                // Obtiene todos los platos guardados
                const platos = JSON.parse(localStorage.getItem('platos')) || [];
                let resultados = [];
                if (query === '') {
                    resultados = platos;
                } else {
                    resultados = platos.filter(plato => plato.nombre && plato.nombre.toLowerCase().includes(query));
                }
                // Renderiza resultados en el grid
                const foodGrid = document.getElementById('food-grid');
                foodGrid.innerHTML = '';
                if (resultados.length === 0) {
                    foodGrid.innerHTML = '<div style="color:#888;margin:20px 0;">No hay platos disponibles.</div>';
                    return;
                }
                resultados.forEach(plato => {
                    const card = document.createElement('div');
                    card.className = 'food-card';
                    let tieneImagen = plato.img && plato.img.trim() !== '';
                    card.innerHTML = `
                        <div class="food-image">
                            ${tieneImagen ? `<img src="${plato.img}" alt="${plato.nombre}" onerror="this.parentNode.innerHTML='<div style=\'width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#ccc;color:#555;font-weight:bold;font-size:1.1em;\'>Sin imagen</div>'">` : `<div style='width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#ccc;color:#555;font-weight:bold;font-size:1.1em;'>Sin imagen</div>`}
                        </div>
                        <div class="food-info">
                            <h3>${plato.nombre}</h3>
                            <p>${plato.descripcion || ''}</p>
                            <div class="food-footer">
                                <span class="price">${plato.precio}</span>
                            </div>
                        </div>
                    `;
                    foodGrid.appendChild(card);
                });
            });
        }

        // Funci√≥n para cerrar sesi√≥n
        const logoutButton = document.getElementById('client-logout');
        if (logoutButton) {
            logoutButton.addEventListener('click', function(e) {
                e.preventDefault();
                // Limpia datos de sesi√≥n
                localStorage.removeItem('rol');
                localStorage.removeItem('userRole');
                // Redirige al login
                window.location.href = '../index.html';
            });
        }

        // --- CAMBIO DE IDIOMA Y MODO OSCURO ---
        const traducciones = {
            '¬°Bienvenido, Cliente!': 'Welcome, Customer!',
            'Men√∫': 'Menu',
            'GPS': 'GPS',
            'Carrito': 'Cart',
            'Historial': 'History',
            'Perfil': 'Profile',
            'Cerrar Sesi√≥n': 'Logout',
            'Inicio': 'Home',
            '¬øQu√© es FoodApp?': 'What is FoodApp?',
            'FoodApp es una plataforma digital que conecta a clientes y restaurantes, permiti√©ndote explorar men√∫s, buscar tus platos favoritos, realizar pedidos, gestionar tu perfil y mucho m√°s, todo de forma r√°pida y sencilla.': 'FoodApp is a digital platform that connects customers and restaurants, allowing you to explore menus, search for your favorite dishes, place orders, manage your profile, and much more, all quickly and easily.',
            'Buscar platos por nombre...': 'Search dishes by name...',
            'Platos Recomendados': 'Recommended Dishes',
            'Contacto': 'Contact',
            '¬øTienes dudas o necesitas ayuda? Cont√°ctanos por WhatsApp:': 'Do you have questions or need help? Contact us via WhatsApp:',
            // Reverso para traducci√≥n bidireccional
            'Welcome, Customer!': '¬°Bienvenido, Cliente!',
            'Menu': 'Men√∫',
            'Cart': 'Carrito',
            'History': 'Historial',
            'Profile': 'Perfil',
            'Logout': 'Cerrar Sesi√≥n',
            'Home': 'Inicio',
            'What is FoodApp?': '¬øQu√© es FoodApp?',
            'FoodApp is a digital platform that connects customers and restaurants, allowing you to explore menus, search for your favorite dishes, place orders, manage your profile, and much more, all quickly and easily.': 'FoodApp es una plataforma digital que conecta a clientes y restaurantes, permiti√©ndote explorar men√∫s, buscar tus platos favoritos, realizar pedidos, gestionar tu perfil y mucho m√°s, todo de forma r√°pida y sencilla.',
            'Search dishes by name...': 'Buscar platos por nombre...',
            'Recommended Dishes': 'Platos Recomendados',
            'Contact': 'Contacto',
            'Do you have questions or need help? Contact us via WhatsApp:': '¬øTienes dudas o necesitas ayuda? Cont√°ctanos por WhatsApp:'
        };
        let idiomaIngles = false;
        document.getElementById('btn-idioma').onclick = function() {
            idiomaIngles = !idiomaIngles;
            this.textContent = idiomaIngles ? 'Espa√±ol' : 'English';
            document.querySelectorAll('h1,h2,h3,label,button,a,p,option,span,th,td, input[placeholder]').forEach(el => {
                if (el.placeholder && traducciones[el.placeholder]) {
                    el.placeholder = traducciones[el.placeholder];
                }
                const txt = el.textContent.trim();
                if (traducciones[txt]) {
                    el.textContent = traducciones[txt];
                }
            });
        };
        let darkMode = document.body.classList.contains('modo-oscuro');
        document.getElementById('btn-darkmode').onclick = function() {
            darkMode = !darkMode;
            document.body.classList.toggle('modo-oscuro', darkMode);
            this.textContent = darkMode ? '‚òÄÔ∏è' : 'üåô';
        };
    </script>
</body>
</html>